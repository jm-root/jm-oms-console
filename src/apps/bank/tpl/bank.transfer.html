<div>
    <div ui-view class="fade-in-down"></div>
    <form ng-show="$state.is('app.bank.transfer')" name="formValidate" class="form-horizontal form-validation">
        <div class="panel panel-default">
            <div class="panel-heading  wrapper-sm titlefixed">
                <strong>{{'bank.bank.transfer.title'|translate}}</strong>
            </div>
            <div class="col-lg-6 col-md-7 col-sm-9 bg-white col-sm-offset-1">
            <div class="paddingtop  wrapper-md">
                <div ng-if="isSmartDevice" class="form-group b-b">
                    <label class="control-label">币种</label>
                    <div  class="p-b-md pull-right control-label">金币</div>
                </div>
                <div ng-if="!isSmartDevice" class="form-group b-b">
                    <label class="control-label m-t-xs pull-left">{{'bank.bank.transfer.label1'|translate}}</label>
                    <div  class="p-b-md pull-right">
                        <select class="form-control w-sm" ng-model="bank.ctCode" ng-required="true">
                            <option value="">{{'bank.bank.transfer.ctOpts.opts'|translate}}</option>
                            <option value="tb">{{'bank.bank.transfer.ctOpts.opts1'|translate}}</option>
                            <option value="jb">{{'bank.bank.transfer.ctOpts.opts2'|translate}}</option>
                            <option value="dbj">{{'bank.bank.transfer.ctOpts.opts3'|translate}}</option>
                        </select>
                    </div>
                </div>
                <div ui-sref=".searchUser" ng-if="isSmartDevice" class="form-group row m-b-sm b-b">
                    <label class="pull-left control-label p-b-md">{{'bank.bank.transfer.label2'|translate}}</label>
                    <div  class="pull-right  control-label">
                        <span class="m-r-md">{{uid}}</span>
                        <span class="m-r-md">{{nick}}</span>
                        <i class="fa fa-chevron-right"></i>
                    </div>
                </div>
                <div class="form-group b-b p-b-md" ng-if="!isSmartDevice">
                    <label class="pull-left control-label">{{'bank.bank.transfer.label2'|translate}}</label>
                    <div class="pull-right">
                        <div class="input-group" style="max-width: 360px;">
                            <input type="text" class="form-control" placeholder="{{'common.userId'|translate}}" ng-model="bank.toUserId" ng-required="true" ng-keyup="inputsearch()">
                            <div class="input-group-btn dropdown" drop-down-table>
                                <div type="button" class="btn btn-default" ng-bind="nick||'???'"></div><div type="button" class="btn btn-default">{{'common.search'|translate}} <span class="caret"></span></div>
                                <ul class="dropdown-menu pull-right">
                                    <table st-table="rowCollectionBasic" class="w-xxl table table-bordered table-striped" style="margin: 0 0 5px 0">
                                        <thead>
                                        <tr>
                                            <th>{{ 'common.userId' | translate }}</th>
                                            <th>{{ 'common.userAccount' | translate }}</th>
                                            <th>{{ 'common.userName' | translate }}</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="row in usersInfo.rows" ng-click="selectUser($event)" st-select-mode="single">
                                            <td>{{row.uid}}</td>
                                            <td>{{row.account||row.mobile}}</td>
                                            <td>{{row.nick}}</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                    <div ng-if="!total" style="text-align: center;">{{'ag-grid.noRowsToShow'|translate}}</div>
                                    <div ng-if="usersInfo.rows.length>0||total" style="text-align: center;">
                                        <i class="glyphicon glyphicon-chevron-left color" style="width: 20%" ng-click="left(bank.toUserId)"></i>
                                        <span>
                                            <label>{{page}}</label>/
                                            <label>{{pages}}</label>
                                        </span>
                                        <i class="glyphicon glyphicon-chevron-right color" style="width: 20%" ng-click="right(bank.toUserId)"></i>
                                    </div>
                                </ul>
                            </div><!-- /btn-group -->
                        </div>
                    </div>
                </div>

                <div class="form-group b-b p-b-md">
                    <label class="pull-left control-label m-r-sm m-b-xs">{{'bank.bank.transfer.label3'|translate}}</label>
                    <div class=" pull-right w-auto">
                        <input type="number" class="form-control input-sm pull-left" style="width: 150px;" min="1" placeholder="{{'bank.bank.transfer.defaultAccount'|translate}}" ng-pattern="/^[0-9]*$/" ng-model="bank.toAccountId">
                    </div>
                </div>

                <div class="form-group b-b m-t-xs" ng-if="!isCP">
                    <label class="pull-left control-label p-b-lg">{{'bank.bank.transfer.label4'|translate}}</label>
                    <div class="pull-right w-auto">
                        <p class="" ng-if="accounts.length<=1">{{bank.fromAccountId||''}}</p>
                        <select class="form-control w-sm" ng-if="accounts.length>1" ng-model="bank.fromAccountId" ng-options="option.id as option.id for option in accounts" ng-change="changeAcount()" ng-required="true">
                        </select>
                    </div>
                </div>

                <div class="form-group b-b" ng-if="!isCP">
                    <label class="control-label">{{'common.balance'|translate}}</label>
                    <div class=" w-auto pull-right control-label">
                        <p>{{sum=defAccount.holds[bank.ctCode]&&(defAccount.holds[bank.ctCode].amount||0)||0}}</p>
                    </div>
                </div>

                <div class="form-group b-b p-b-sm">
                    <label class=" control-label">{{'bank.bank.transfer.label5'|translate}}</label>

                    <div class="pull-right ">
                        <input type="number" class="form-control input-sm pull-left" style="width: 150px;" ng-model="bank.amount" min="1" placeholder="{{'common.amount'|translate}}" ng-pattern="/^[0-9]*$/">
                    </div>
                </div>


                <div class="form-group">
                    <label class=" control-label">{{'common.memo'|translate}}</label>

                    <div class="pull-right w-lg">
                        <textarea class="form-control" style="max-width: 320px;" rows="4" style="resize: none;" placeholder="" ng-model="bank.memo"></textarea>
                    </div>
                </div>

            </div>
            <footer class="panel-footer text-right lter">
                <button type="submit" class="btn btn-success" ng-click="!formValidate.$invalid&&transfer()">{{'common.transfer'|translate}}</button>
            </footer>
            </div>

        </div>
    </form>
</div>
