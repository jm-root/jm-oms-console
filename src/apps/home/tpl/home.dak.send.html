<div>
    <form name="formValidate" class="form-horizontal form-validation">
        <div class="panel panel-default">
            <div class="panel-heading titlefixed">
                <strong>{{ 'home.sendDak.send' | translate }}</strong>
            </div>
            <div class="panel-body paddingtop">
                <div class="form-group">
                    <label class="col-sm-2 control-label"><code style="background-color: transparent">*</code>{{ 'home.sendDak.title' | translate }}</label>

                    <div class="col-sm-9">
                        <input type="text" class="form-control" style="max-width: 320px;" ng-model="dak.title" ng-required="true">
                    </div>
                    <div class="col-sm-1"></div>
                </div>

                <div class="form-group">
                    <label class="col-sm-2 control-label"><code style="background-color: transparent">*</code>{{ 'home.sendDak.content' | translate }}</label>

                    <div class="col-sm-9">
                        <textarea class="form-control" style="max-width: 320px;" rows="4" style="resize: none;" placeholder="" ng-model="dak.content" ng-required="true"></textarea>
                    </div>
                    <div class="col-sm-1"></div>
                </div>

                <div class="form-group">
                    <label class="col-sm-2 control-label">{{ 'home.sendDak.isUserMail' | translate }}</label>
                    <div class="col-sm-9">
                        <label class="i-checks checkbox-inline">
                            <input type="checkbox" ng-model="dak.type"><i></i>
                        </label>
                    </div>
                    <div class="col-sm-1"></div>
                </div>

                <div class="form-group">
                    <label class="col-sm-2 control-label">{{ 'home.sendDak.userID' | translate }}</label>

                    <div class="col-sm-9">
                        <div class="input-group" style="max-width: 360px;">
                            <input type="text" class="form-control" placeholder="{{ 'home.sendDak.userID' | translate }}" ng-model="dak.userId">
                            <div class="input-group-btn dropdown" drop-down-table>
                                <div type="button" class="btn btn-default" ng-bind="nick||'用户名'"></div><div type="button" class="btn btn-default">{{ 'home.sendDak.search' | translate }} <span class="caret"></span></div>
                                <ul class="dropdown-menu pull-right w-xxl">
                                    <div class="input-group">
                                        <input type="text" class="form-control input-sm btn-rounded" placeholder="{{ 'home.sendDak.searchUserName' | translate }}" ng-model="keyword">
                                        <span class="input-group-btn">
                                              <span class="btn btn-default btn-sm btn-rounded" ng-click="searchUser(keyword)"><i class="fa fa-search"></i></span>
                                            </span>
                                    </div>
                                    <table st-table="rowCollectionBasic" class="table table-bordered table-striped" style="margin: 0 0 5px 0">
                                        <thead>
                                        <tr>
                                            <th>{{ 'home.sendDak.userObjectID' | translate }}</th>
                                            <th>{{ 'home.sendDak.userID' | translate }}</th>
                                            <th>{{ 'home.sendDak.userName' | translate }}</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="row in usersInfo.rows.slice(5*(i-1),[5*i])" ng-click="selectUser($event)" st-select-mode="single">
                                            <td>{{row._id}}</td>
                                            <td>{{row.uid}}</td>
                                            <td>{{row.nick}}</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                    <div ng-if="usersInfo.rows.length > 4" style="text-align: center;">
                                        <i class="glyphicon glyphicon-chevron-left color" style="width: 20%" ng-click="left()"></i>
                                        <span>
                                            <label>{{i}}</label>/
                                            <label>{{psize}}</label>
                                        </span>
                                        <i class="glyphicon glyphicon-chevron-right color" style="width: 20%" ng-click="right()"></i>
                                    </div>
                                </ul>
                            </div><!-- /btn-group -->
                        </div>
                    </div>
                    <div class="col-sm-1"></div>
                </div>

                <div class="form-group">
                    <label class="col-sm-2 control-label">{{ 'home.sendDak.attachProp' | translate }}</label>
                    <div class="col-sm-9">
                        <table class="table table-bordered table-hover table-condensed bg-white-only">
                            <span class="btn btn-default" ng-click="addItem()">{{ 'home.sendDak.addProp' | translate }}</span>
                            <tr style="font-weight: bold">
                                <td style="width:40%">{{ 'home.sendDak.prop' | translate }}</td>
                                <td style="width:30%">{{ 'home.sendDak.number' | translate }}</td>
                                <td style="width:30%">{{ 'home.sendDak.dueTime' | translate }}</td>
                                <td style="width:40px">{{ 'home.sendDak.edit' | translate }}</td>
                            </tr>
                            <tr ng-repeat="item in dak.attach">
                                <td class="v-middle">
                                    <select class="form-control" style="min-width: 150px; width: auto" ng-model="item.prop" ng-options="option._id as option.name for option in props" ng-required="true">
                                        <option value="">{{ 'home.sendDak.noProp' | translate }}</option>
                                    </select>
                                </td>
                                <td class="v-middle">
                                    <input type="number" class="form-control" placeholder="{{ 'home.sendDak.number' | translate }}" min="1" ng-pattern="/^[0-9]*$/" ng-model="item.amount">
                                </td>
                                <td class="v-middle">
                                    <input type="number" class="form-control" placeholder="{{ 'home.sendDak.dueTime' | translate }}" min="0" ng-pattern="/^[0-9]*$/" ng-model="item.expire">
                                </td>
                                <td style="white-space: nowrap">
                                    <a class="btn btn-sm btn-danger" ng-click="removeItem($index)">{{ 'home.delete' | translate }}</a>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="col-sm-1"></div>
                </div>

            </div>


            <footer class="panel-footer text-right bg-light lter">
                <!--<div style="max-width: 750px">-->
                    <button type="submit" class="btn btn-success" ng-click="!formValidate.$invalid&&send()">{{ 'home.send' | translate }}</button>
                <!--</div>-->
            </footer>
        </div>
    </form>

</div>