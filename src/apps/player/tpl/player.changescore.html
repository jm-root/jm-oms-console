<div ui-jq="slimScroll" ui-refresh="app.navHeight" ui-options="{height:{{app.navHeight-51}}+'px', size:'8px'}">
    <form name="formValidate" class="form-horizontal form-validation">
        <div class="panel panel-default">
            <div class="panel-heading">
                <strong><!--上/退分-->{{'player.changescore.title'|translate}}</strong>
            </div>
            <div class="panel-body">
                <div class="form-group">
                    <label class="col-sm-2 control-label"><!--可操作余额-->{{'player.changescore.label1'|translate}}</label>
                    <div class="col-lg-9 w-auto">
                        <p class="form-control-static">{{jb||0}}</p>
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-sm-2 control-label"><!--操作类型-->{{'player.changescore.label2'|translate}}</label>
                    <div class="col-sm-9">
                        <select class="form-control w-sm" ng-model="operate.type" ng-required="true" ng-click="operate()">
                            <option value="" disabled>{{'player.changescore.opts.opt1'|translate}}</option><!--请选操作类型-->
                            <option value="1">{{'player.changescore.opts.opt2'|translate}}</option><!--上分-->
                            <option value="2">{{'player.changescore.opts.opt3'|translate}}</option><!--退分-->
                        </select>
                    </div>
                    <div class="col-sm-1"></div>
                </div>

                <div class="form-group">
                    <label class="col-sm-2 control-label">{{'player.changescore.label3'|translate}}</label><!--选择玩家-->
                    <div class="col-sm-9">
                        <div class="input-group" style="max-width: 360px;">
                            <input type="text" class="form-control" placeholder="{{ 'common.userId' | translate }}" ng-model="player.toUserId" ng-required="true">
                            <div class="input-group-btn dropdown" drop-down-table>
                                <div type="button" class="btn btn-default" ng-bind="nick||'用户名'"></div><div type="button" class="btn btn-default">{{ 'common.search' | translate }} <span class="caret"></span></div>
                                <ul class="dropdown-menu pull-right w-xxl">
                                    <div class="input-group">
                                        <input type="text" class="form-control input-sm btn-rounded" placeholder="{{ 'common.searchUser' | translate }}" ng-model="keyword">
                                        <span class="input-group-btn">
                                              <span class="btn btn-default btn-sm btn-rounded" ng-click="searchUser(keyword)"><i class="fa fa-search"></i></span>
                                            </span>
                                    </div>
                                    <table st-table="rowCollectionBasic" class="table table-bordered table-striped" style="margin: 0 0 5px 0">
                                        <thead>
                                        <tr>
                                            <th>{{ 'common.userObjectId' | translate }}</th>
                                            <th>{{ 'common.userId' | translate }}</th>
                                            <th>{{ 'common.userName' | translate }}</th>
                                        </tr>
                                        </thead>
                                        <tbody class="hand">
                                        <tr ng-repeat="row in usersInfo.rows.slice(10*(page-1),[10*page])" ng-click="selectUser($event)" st-select-mode="single">
                                            <td>{{row._id}}</td>
                                            <td>{{row.uid}}</td>
                                            <td>{{row.nick}}</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                    <div ng-if="usersInfo.rows.length > 9" style="text-align: center;">
                                        <i class="glyphicon glyphicon-chevron-left color hand" style="width: 20%" ng-click="left()"></i>
                                        <span>
                                            <label>{{page}}</label>/
                                            <label>{{pages}}</label>
                                        </span>
                                        <i class="glyphicon glyphicon-chevron-right color hand" style="width: 20%" ng-click="right()"></i>
                                    </div>
                                </ul>
                            </div><!-- /btn-group -->
                        </div>
                    </div>
                    <div class="col-sm-1"></div>
                </div>

                <div class="form-group">
                    <div class=" col-sm-2 control-label">
                        <label>{{'player.changescore.label4'|translate}}</label><!--玩家余额-->
                    </div>
                    <label class="col-lg-1 col-md-2 col-sm-3 control-label">{{'player.changescore.before'|translate}}:</label><!--操作前-->
                    <div class="col-lg-1 col-sm-6 control-label w-auto">
                        <p ng-if="player.toUserId">{{player.jb}}</p>
                    </div>
                    <label class="col-lg-1 col-md-2 col-sm-3 control-label">{{'player.changescore.after'|translate}}:</label><!--操作后-->
                    <div class="col-lg-1 col-sm-6 control-label w-auto">
                        <p ng-if="(operate.type&&sum)||((operate.type&&sum==0))">{{sum>=0?sum:"余额不足" }}</p><!--余额不足-->
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-sm-2 control-label">{{'player.changescore.label5'|translate}}</label><!--操作金额-->

                    <div class="col-sm-9">
                        <input type="number" onkeypress="return event.keyCode>=48&&event.keyCode<=57" class="form-control input-sm pull-left" style="width: 150px;" ng-model="bank.amount" min="1" placeholder="{{ 'common.amount' | translate }}" ng-pattern="/^[0-9]*$/" ng-change="operate()" ng-blur="operate()">
                    </div>
                    <div class="col-sm-1"></div>
                </div>

                <div class="form-group">
                    <label class="col-sm-2 control-label">{{ 'common.memo' | translate }}</label>

                    <div class="col-sm-9">
                        <textarea class="form-control" style="max-width: 320px;resize: none;" rows="4" placeholder="" ng-model="bank.memo"></textarea>
                    </div>
                    <div class="col-sm-1"></div>
                </div>

            </div>
            <footer class="panel-footer text-right bg-light lter">
                <div style="max-width: 700px">
                    <button type="submit" class="btn btn-success" ng-click="!formValidate.$invalid&&updateData(event)">{{'common.save'|translate}}</button><!--保存-->
                </div>
            </footer>
        </div>
    </form>

</div>
