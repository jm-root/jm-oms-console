<div class="bg-light lter b-b wrapper"><h1 class="m-n font-thin h3">{{'datastatistics.agentdiary.title'|translate}}</h1></div>

<div>
    <div class="pull-right headpadd ">
        <form>
            <div class="input-group  w-md ">
                <input type="text" ng-model="search.keyword" class="form-control input-sm bg-white no-border rounded padder" placeholder="{{'common.search'|translate}}">
                <span class="input-group-btn" style="width: auto">
                    <button type="submit" class="btn btn-sm bg-white rounded" ng-click="getdata(1)"><i class="fa fa-search"></i></button>
                </span>
            </div>
        </form>
    </div>
    <div class="pull-right headpadd m-r-sm">
        <div class="input-group m-r-sm" style="width: 185px;">
            <input date-range-picker type="text" class="form-control" ng-model="search.date" options="dateOptions" placeholder="{{ 'common.times' | translate }}" style="position: relative;height: 34px"/>
            <i class="glyphicon glyphicon-calendar fa fa-calendar" style="position: absolute;right: 8px;top:8px;z-index:1000;cursor: pointer;" onclick="$(this).parent().find('input').click();"></i>
        </div>
    </div>
    <div class="input-group w-sm pull-right headpadd m-r-sm" ng-if="select">
        <select ui-jq="chosen" class="w-full input-sm" ng-model="search.agent" ng-options="opt._id as opt.name for opt in channels" ng-change="getdata(1)">
            <option value="">{{'datastatistics.agentdiary.label1'|translate}}</option>
        </select>
    </div>
    <div class="pull-right m-r-sm headpadd" ng-show="!isSmartDevice">
        <select class="form-control" ng-model="pageSize" ng-options="o.val as o.val for o in listRowsOptions" ng-change="getdata(1)">
        </select>
    </div>
</div>
<div class="line b-b"></div>

<div style="margin: 0 10px 5px;position: relative">
        <!--loading-->
        <div ng-if="moreLoading">
            <div style="position:fixed;z-index:1;width:100%;height:100%; background:#eeeeee;opacity: 0.5;"></div>
            <div ng-if="!isSmartDevice"  style="position:absolute;z-index: 2;left: 0;right: 0;top: 49%;bottom: 0;margin:auto;">
                <div class="text-center"><img width="30px" src="./apps/common/img/loading.gif"></div>
            </div>
            <div ng-if="isSmartDevice"  style="position:fixed;z-index: 2;left: 50%;top: 22em;margin-left: -8px">
                <div class="text-center"><img width="30px" src="./apps/common/img/loading.gif"></div>
            </div>
        </div>
        <!--no data-->
        <div class="text-center" ng-if="nodata&&!isSmartDevice" style="position:absolute;z-index: 2;left: 0;right: 0;top: 49%;bottom: 0;margin:auto;">
            <span style="border: 1px solid  #aaaaaa;padding: 5px;border-radius: 10px;">{{'ag-grid.noRowsToShow'|translate}}</span>
        </div>
        <div class="text-center" ng-if="nodata&&isSmartDevice" style="position:fixed;z-index: 2;left: 50%;top: 22em;margin-left: -20px">
            <span style="border: 1px solid  #aaaaaa;padding: 5px;border-radius: 10px;">{{'ag-grid.noRowsToShow'|translate}}</span>
        </div>

    <div class="cttable">
        <!--【fixed-thead表头】-->
        <table ng-if="!isSmartDevice" class="form-table fixed-thead " cellpadding="0" cellspacing="0" >
            <tr>
                <th ng-style="tdstyle">{{'datastatistics.agentdiary.header.agentid'|translate}}</th>
                <th>{{'datastatistics.agentdiary.header.agentname'|translate}}</th>
                <th>{{'datastatistics.agentdiary.header.type'|translate}}</th>
                <th>{{'datastatistics.agentdiary.header.amount'|translate}}</th>
                <th>{{'datastatistics.agentdiary.header.jbbalance'|translate}}</th>
                <th ng-style="tdstyle">{{'datastatistics.agentdiary.header.toagentid'|translate}}</th>
                <th>{{'datastatistics.agentdiary.header.toagentname'|translate}}</th>
                <th>{{'datastatistics.agentdiary.header.time'|translate}}</th>
                <th style="width: 17px" ng-if="agentdata.rows.length>17"></th>
            </tr>
        </table>
        <!--【fixed-thead表头】-->
        <!--【表身】-->
        <div class="scroll-box" ng-style="tablestyle">
        <table class="form-table table table-striped table-bordered mobiletable table-hover">
            <tr ng-repeat="row in agentdata.rows" class="active" ng-if="total">
                <td ng-style="tdstyle" data-title="{{'datastatistics.agentdiary.header.agentid'|translate}}" >{{row.fromUid||row.fromUserId}}</td>
                <td data-title="{{'datastatistics.agentdiary.header.agentname'|translate}}" >{{row.fromUserName}}</td>
                <td data-title="{{'datastatistics.agentdiary.header.type'|translate}}" >{{row.type}}</td>
                <td data-title="{{'datastatistics.agentdiary.header.amount'|translate}}" >{{row.amount | number}}</td>
                <td data-title="{{'datastatistics.agentdiary.header.jbbalance'|translate}}" >{{row.balance | number}}</td>
                <td ng-style="tdstyle" data-title="{{'datastatistics.agentdiary.header.toagentid'|translate}}" >{{row.toUid||row.toUserId}}</td>
                <td data-title="{{'datastatistics.agentdiary.header.toagentname'|translate}}" >{{row.toUserName}}</td>
                <td data-title="{{'datastatistics.agentdiary.header.time'|translate}}" >{{row.createdAt | date:'yyyy-MM-dd HH:mm:ss'}}</td>
            </tr>
            </tbody>
        </table>
        </div>
    </div>

    <!--ng-if="!isSmartDevice"-->
    <div ng-if="!isSmartDevice" style="position:absolute;z-index: 2;left: 0;right: 0;top: 101%;bottom: 0;margin:auto;">
        <div class="text-center">
            <div class="pull-left m-l-md">{{ pages!=0 ? (((page>0?(page-1):page)*(pageSize||20)+1)||0) : 0}} - {{(page*(pageSize||20) < total)?(page*(pageSize||20)):total||0}} / {{totalnumber||0}}</div>
            <button class="btn btn-default btn-sm" ng-click="getdata(1)" ng-disabled="pages ==0 || page==1">{{'ag-grid.first'|translate}}</button>
            <button class="btn btn-default btn-sm" ng-click="left()" ng-disabled="pages ==0 || page==1">{{'ag-grid.previous'|translate}}</button>
            <span>{{ pages==0 ? 0 : page}}/{{pages}}</span>
            <button class="btn btn-default btn-sm" ng-click="right()" ng-disabled="pages==0 || page==pages">{{'ag-grid.next'|translate}}</button>
            <button class="btn btn-default btn-sm" ng-click="getdata(pages)" ng-disabled="pages==0 || page==pages">{{'ag-grid.last'|translate}}</button>
        </div>
    </div>
    <div class="text-center" ng-if="!moreLoading&&!nodata&&isSmartDevice">
        <button class="btn btn-default btn-sm" ng-click="getdata(1)" ng-disabled="page==1">{{'ag-grid.first'|translate}}</button>
        <button class="btn btn-default btn-sm" ng-click="left()" ng-disabled="page==1">{{'ag-grid.previous'|translate}}</button>
        <span>{{ pages==0 ? 0:page }}/{{ pages }}</span>
        <button class="btn btn-default btn-sm" ng-click="right()" ng-disabled="pages==0 || page==pages">{{'ag-grid.next'|translate}}</button>
        <button class="btn btn-default btn-sm" ng-click="getdata(pages)" ng-disabled="pages==0 || page==pages">{{'ag-grid.last'|translate}}</button>
    </div>
</div>
</div>